---
title: "REST API"
description: "Use Autumn's REST API directly"
icon: "terminal"
---

## Overview

You can use Autumn's REST API directly without an SDK. This is useful for server-side implementations, non-JavaScript environments, or when you need more control over the HTTP requests.

## Base URL

All API requests should be made to:

```
https://api.useautumn.com/v1
```

## Authentication

Authenticate your requests using a Bearer token in the `Authorization` header:

```bash
Authorization: Bearer your_public_key
```

<Warning>
  Use your **public key** for client-side requests and your **secret key** for server-side requests. Never expose your secret key in client-side code.
</Warning>

You can find your API keys in the [Autumn dashboard](https://app.useautumn.com) under **Settings â†’ API Keys**.

## Customer Identification

Most endpoints require a `customer_id` to identify which customer the operation is for. You can provide this in two ways:

1. **In the URL path**: `/v1/customers/{customer_id}/attach`
2. **In the request body**: `{ "customer_id": "user_123" }`

## Core Endpoints

### POST /attach

Handle all purchase flows including upgrades, downgrades, and new subscriptions.

<CodeGroup>

```bash curl
curl -X POST https://api.useautumn.com/v1/customers/user_123/attach \
  -H "Authorization: Bearer your_public_key" \
  -H "Content-Type: application/json" \
  -d '{
    "product_id": "pro",
    "success_url": "https://yourapp.com/success",
    "cancel_url": "https://yourapp.com/pricing"
  }'
```

```javascript fetch
const response = await fetch(
  'https://api.useautumn.com/v1/customers/user_123/attach',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer your_public_key',
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      product_id: 'pro',
      success_url: 'https://yourapp.com/success',
      cancel_url: 'https://yourapp.com/pricing',
    }),
  }
);

const data = await response.json();
```

```python python
import requests

response = requests.post(
    'https://api.useautumn.com/v1/customers/user_123/attach',
    headers={
        'Authorization': 'Bearer your_public_key',
        'Content-Type': 'application/json',
    },
    json={
        'product_id': 'pro',
        'success_url': 'https://yourapp.com/success',
        'cancel_url': 'https://yourapp.com/pricing',
    }
)

data = response.json()
```

</CodeGroup>

**Request Body:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `product_id` | string | Yes | The ID of the product to attach |
| `plan_id` | string | No | Specific plan ID if the product has multiple plans |
| `success_url` | string | No | URL to redirect after successful payment |
| `cancel_url` | string | No | URL to redirect if user cancels |

**Response:**

```json
{
  "checkout_url": "https://checkout.stripe.com/...",
  "success": true
}
```

For existing customers upgrading/downgrading, the response might not include a `checkout_url`:

```json
{
  "success": true,
  "message": "Plan updated successfully"
}
```

### POST /check

Check if a customer has access to a feature and retrieve usage information.

<CodeGroup>

```bash curl
curl -X POST https://api.useautumn.com/v1/customers/user_123/check \
  -H "Authorization: Bearer your_public_key" \
  -H "Content-Type: application/json" \
  -d '{
    "feature_id": "ai_tokens"
  }'
```

```javascript fetch
const response = await fetch(
  'https://api.useautumn.com/v1/customers/user_123/check',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer your_public_key',
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      feature_id: 'ai_tokens',
    }),
  }
);

const data = await response.json();
```

```python python
import requests

response = requests.post(
    'https://api.useautumn.com/v1/customers/user_123/check',
    headers={
        'Authorization': 'Bearer your_public_key',
        'Content-Type': 'application/json',
    },
    json={
        'feature_id': 'ai_tokens',
    }
)

data = response.json()
```

</CodeGroup>

**Request Body:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `feature_id` | string | Yes | The ID of the feature to check |
| `value` | number | No | Amount to check against (for pre-validation) |

**Response:**

```json
{
  "allowed": true,
  "remaining": 8500,
  "limit": 10000,
  "reset_at": "2026-03-01T00:00:00Z"
}
```

If access is denied:

```json
{
  "allowed": false,
  "remaining": 0,
  "limit": 100,
  "reset_at": "2026-03-01T00:00:00Z"
}
```

### POST /track

Record usage events for metered or usage-based features.

<CodeGroup>

```bash curl
curl -X POST https://api.useautumn.com/v1/customers/user_123/track \
  -H "Authorization: Bearer your_public_key" \
  -H "Content-Type: application/json" \
  -d '{
    "feature_id": "ai_tokens",
    "value": 1312
  }'
```

```javascript fetch
const response = await fetch(
  'https://api.useautumn.com/v1/customers/user_123/track',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer your_public_key',
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      feature_id: 'ai_tokens',
      value: 1312,
    }),
  }
);

const data = await response.json();
```

```python python
import requests

response = requests.post(
    'https://api.useautumn.com/v1/customers/user_123/track',
    headers={
        'Authorization': 'Bearer your_public_key',
        'Content-Type': 'application/json',
    },
    json={
        'feature_id': 'ai_tokens',
        'value': 1312,
    }
)

data = response.json()
```

</CodeGroup>

**Request Body:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `feature_id` | string | Yes | The ID of the feature to track |
| `value` | number | Yes | The amount to track |
| `metadata` | object | No | Additional data to store with the event |

**Response:**

```json
{
  "success": true,
  "new_total": 2812
}
```

## Error Responses

All errors follow a consistent format:

```json
{
  "error": {
    "code": "not_found",
    "message": "Feature not found",
    "details": {}
  }
}
```

**Common Status Codes:**

| Status | Description |
|--------|-------------|
| `200` | Success |
| `400` | Bad request - invalid parameters |
| `401` | Unauthorized - invalid or missing API key |
| `403` | Forbidden - customer doesn't have access |
| `404` | Not found - resource doesn't exist |
| `429` | Rate limited - too many requests |
| `500` | Internal server error |

**Common Error Codes:**

| Code | Description |
|------|-------------|
| `unauthorized` | Invalid API key |
| `forbidden` | Customer doesn't have access to this feature |
| `not_found` | Feature, product, or customer not found |
| `validation_error` | Invalid request parameters |
| `rate_limited` | Too many requests |
| `insufficient_quota` | Customer has exceeded their usage limit |

## Rate Limiting

The API implements rate limiting to prevent abuse:

- **100 requests per minute** per API key
- **1000 requests per hour** per API key

Rate limit information is included in response headers:

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1709251200
```

## Server-Side Example

Here's a complete example of using the API from a Node.js server:

```javascript server.js
import express from 'express';

const app = express();
app.use(express.json());

// Middleware to check feature access
const checkFeatureAccess = async (req, res, next) => {
  const customerId = req.user.id; // From your auth system
  const featureId = 'ai_tokens';
  const requiredTokens = 1000;

  try {
    const response = await fetch(
      `https://api.useautumn.com/v1/customers/${customerId}/check`,
      {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${process.env.AUTUMN_SECRET_KEY}`,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          feature_id: featureId,
          value: requiredTokens,
        }),
      }
    );

    const data = await response.json();

    if (!data.allowed) {
      return res.status(403).json({
        error: 'Insufficient tokens',
        remaining: data.remaining,
      });
    }

    next();
  } catch (error) {
    res.status(500).json({ error: 'Failed to check access' });
  }
};

// Protected endpoint
app.post('/api/generate', checkFeatureAccess, async (req, res) => {
  // Your AI generation logic here
  const result = await generateAI(req.body.prompt);

  // Track the usage
  await fetch(
    `https://api.useautumn.com/v1/customers/${req.user.id}/track`,
    {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.AUTUMN_SECRET_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        feature_id: 'ai_tokens',
        value: 1000,
      }),
    }
  );

  res.json({ result });
});

app.listen(3000);
```

## Webhooks

Autumn sends webhooks for important events. See the [Webhooks Guide](/guides/webhooks) for details on:

- Setting up webhook endpoints
- Verifying webhook signatures
- Handling webhook events
- Event types and payloads

## Testing

Use your test API keys (prefixed with `test_`) to test the API without affecting production data:

```bash
curl -X POST https://api.useautumn.com/v1/customers/test_user/check \
  -H "Authorization: Bearer test_pk_..." \
  -H "Content-Type: application/json" \
  -d '{"feature_id": "ai_tokens"}'
```

## Next Steps

<CardGroup cols={2}>

<Card title="JavaScript SDK" icon="js" href="/sdks/javascript">
  Use the JavaScript SDK for easier integration
</Card>

<Card title="Webhooks" icon="webhook" href="/guides/webhooks">
  Handle real-time events with webhooks
</Card>

<Card title="API Reference" icon="book" href="/api-reference/introduction">
  View complete API documentation
</Card>

<Card title="Stripe Integration" icon="stripe" href="/guides/stripe-integration">
  Connect your Stripe account
</Card>

</CardGroup>
