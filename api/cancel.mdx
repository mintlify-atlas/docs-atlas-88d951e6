---
title: "Cancel"
description: "Cancel product subscriptions and attachments"
api: "POST https://api.useautumn.com/v1/cancel"
---

## Overview

The `/cancel` endpoint allows you to cancel a customer's product subscription or attachment. You can choose to:
- Cancel immediately and revoke access right away
- Cancel at the end of the current billing period (default)
- Apply proration for partial period usage

This is useful for implementing subscription management, downgrades, or allowing customers to cancel their plans.

## Authentication

<ParamField header="Authorization" type="string" required>
  Bearer token with your Autumn API key. Use your secret key for server-side requests. Client-side cancellation should be handled through your backend.
</ParamField>

## Request Body

<ParamField body="customer_id" type="string" required>
  The ID of the customer whose product you want to cancel.
</ParamField>

<ParamField body="product_id" type="string" required>
  The ID of the product to cancel. This must be a product currently attached to the customer.
</ParamField>

<ParamField body="entity_id" type="string">
  The ID of the entity (optional). Use this when canceling entity-scoped products like team plans or workspace subscriptions.
</ParamField>

<ParamField body="cancel_immediately" type="boolean" default={false}>
  Whether to cancel the product immediately or at period end.
  
  - `false` (default): Customer retains access until the end of their current billing period
  - `true`: Access is revoked immediately and the subscription is canceled now
</ParamField>

<ParamField body="prorate" type="boolean" default={true}>
  Whether to prorate the cancellation. When `true`, the customer receives a credit for the unused portion of their subscription if canceled before the period ends.
  
  Only applies when `cancel_immediately` is `true`. Defaults to `true` if not specified.
</ParamField>

## Response

<ResponseField name="success" type="boolean" required>
  Whether the cancellation was successful. `true` indicates the product was canceled.
</ResponseField>

<ResponseField name="customer_id" type="string" required>
  The ID of the customer whose product was canceled
</ResponseField>

<ResponseField name="product_id" type="string" required>
  The ID of the canceled product
</ResponseField>

## Examples

### Cancel at period end (default)

This is the recommended approach - the customer keeps access until their billing period ends:

<CodeGroup>

```bash curl
curl -X POST https://api.useautumn.com/v1/cancel \
  -H "Authorization: Bearer am_sk_..." \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "user_123",
    "product_id": "pro_plan"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.useautumn.com/v1/cancel', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer am_sk_...',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    customer_id: 'user_123',
    product_id: 'pro_plan',
  }),
});

const data = await response.json();
console.log(data);
// {
//   "success": true,
//   "customer_id": "user_123",
//   "product_id": "pro_plan"
// }

// Customer retains access until end of billing period
```

```python Python
import requests

response = requests.post(
    'https://api.useautumn.com/v1/cancel',
    headers={
        'Authorization': 'Bearer am_sk_...',
        'Content-Type': 'application/json',
    },
    json={
        'customer_id': 'user_123',
        'product_id': 'pro_plan',
    }
)

data = response.json()
print(data)
```

</CodeGroup>

### Cancel immediately

Revoke access right away:

<CodeGroup>

```bash curl
curl -X POST https://api.useautumn.com/v1/cancel \
  -H "Authorization: Bearer am_sk_..." \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "user_123",
    "product_id": "pro_plan",
    "cancel_immediately": true
  }'
```

```javascript JavaScript
const response = await fetch('https://api.useautumn.com/v1/cancel', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer am_sk_...',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    customer_id: 'user_123',
    product_id: 'pro_plan',
    cancel_immediately: true,
  }),
});

const data = await response.json();
// Access is revoked immediately
// Customer receives prorated credit by default
```

```python Python
import requests

response = requests.post(
    'https://api.useautumn.com/v1/cancel',
    headers={
        'Authorization': 'Bearer am_sk_...',
        'Content-Type': 'application/json',
    },
    json={
        'customer_id': 'user_123',
        'product_id': 'pro_plan',
        'cancel_immediately': True,
    }
)

data = response.json()
```

</CodeGroup>

### Cancel immediately without proration

Cancel right away without issuing a refund:

<CodeGroup>

```bash curl
curl -X POST https://api.useautumn.com/v1/cancel \
  -H "Authorization: Bearer am_sk_..." \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "user_123",
    "product_id": "pro_plan",
    "cancel_immediately": true,
    "prorate": false
  }'
```

```javascript JavaScript
const response = await fetch('https://api.useautumn.com/v1/cancel', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer am_sk_...',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    customer_id: 'user_123',
    product_id: 'pro_plan',
    cancel_immediately: true,
    prorate: false,
  }),
});

const data = await response.json();
// Access revoked immediately, no refund issued
```

```python Python
import requests

response = requests.post(
    'https://api.useautumn.com/v1/cancel',
    headers={
        'Authorization': 'Bearer am_sk_...',
        'Content-Type': 'application/json',
    },
    json={
        'customer_id': 'user_123',
        'product_id': 'pro_plan',
        'cancel_immediately': True,
        'prorate': False,
    }
)

data = response.json()
```

</CodeGroup>

### Cancel entity-scoped product

Cancel a product attached to a specific entity (e.g., team or workspace):

<CodeGroup>

```bash curl
curl -X POST https://api.useautumn.com/v1/cancel \
  -H "Authorization: Bearer am_sk_..." \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "org_456",
    "product_id": "team_plan",
    "entity_id": "team_789"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.useautumn.com/v1/cancel', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer am_sk_...',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    customer_id: 'org_456',
    product_id: 'team_plan',
    entity_id: 'team_789',
  }),
});

const data = await response.json();
// Team's subscription will be canceled at period end
```

```python Python
import requests

response = requests.post(
    'https://api.useautumn.com/v1/cancel',
    headers={
        'Authorization': 'Bearer am_sk_...',
        'Content-Type': 'application/json',
    },
    json={
        'customer_id': 'org_456',
        'product_id': 'team_plan',
        'entity_id': 'team_789',
    }
)

data = response.json()
```

</CodeGroup>

## Use Cases

### Self-service cancellation

Allow customers to cancel their subscription from your app:

```javascript
// In your backend API
app.post('/api/subscription/cancel', async (req, res) => {
  const customerId = req.user.id;
  const { product_id, immediate } = req.body;

  try {
    const result = await autumn.cancel({
      customer_id: customerId,
      product_id: product_id,
      cancel_immediately: immediate || false,
    });

    res.json({
      success: true,
      message: immediate 
        ? 'Your subscription has been canceled immediately.'
        : 'Your subscription will be canceled at the end of your billing period.',
    });
  } catch (error) {
    res.status(400).json({
      success: false,
      error: error.message,
    });
  }
});
```

### Downgrade flow

Cancel current plan before attaching a lower-tier plan:

```javascript
async function downgradePlan(customerId, newProductId) {
  // Cancel the current plan at period end
  await autumn.cancel({
    customer_id: customerId,
    product_id: 'pro_plan',
    cancel_immediately: false, // Keep access until period end
  });

  // Schedule the new plan to start at period end
  // (This would typically be handled by your backend logic)
  
  return {
    success: true,
    message: 'Your plan will be downgraded at the end of your billing period.',
  };
}
```

### Admin cancellation

Cancel subscriptions from an admin panel with immediate effect:

```javascript
async function adminCancelSubscription(customerId, productId, reason) {
  const result = await autumn.cancel({
    customer_id: customerId,
    product_id: productId,
    cancel_immediately: true,
    prorate: true, // Issue refund
  });

  // Log the cancellation
  await logAdminAction({
    action: 'cancel_subscription',
    customer_id: customerId,
    product_id: productId,
    reason: reason,
    timestamp: Date.now(),
  });

  // Notify the customer
  await sendEmail({
    to: customer.email,
    subject: 'Subscription Canceled',
    body: 'Your subscription has been canceled...',
  });

  return result;
}
```

### Team subscription cancellation

Cancel team-level subscriptions:

```javascript
async function cancelTeamSubscription(orgId, teamId) {
  // Cancel the team's subscription
  await autumn.cancel({
    customer_id: orgId,
    product_id: 'team_plan',
    entity_id: teamId,
    cancel_immediately: false, // Let them finish the period
  });

  // Update team status in your database
  await db.teams.update(teamId, {
    subscription_status: 'canceling',
    subscription_ends_at: getCurrentPeriodEnd(),
  });

  // Notify team members
  const teamMembers = await db.teams.getMembers(teamId);
  for (const member of teamMembers) {
    await notifyUser(member.id, {
      type: 'team_subscription_canceling',
      team_id: teamId,
      ends_at: getCurrentPeriodEnd(),
    });
  }
}
```

### Cancellation with retention offer

Show a retention offer before finalizing the cancellation:

```javascript
async function initiateCancel(customerId, productId) {
  // Show retention offer modal
  const accepted = await showRetentionOffer({
    type: 'discount',
    discount: 20,
    duration: 3, // months
  });

  if (accepted) {
    // Apply discount instead of canceling
    await applyDiscount(customerId, productId, 20, 3);
    return { canceled: false, retained: true };
  }

  // Proceed with cancellation
  await autumn.cancel({
    customer_id: customerId,
    product_id: productId,
    cancel_immediately: false,
  });

  return { canceled: true, retained: false };
}
```

## Cancellation Timing

### Cancel at period end (default)

When `cancel_immediately: false` (or not specified):
- Customer keeps full access until the end of their billing period
- No charges on the next billing date
- More customer-friendly approach
- Reduces support requests and chargebacks

### Cancel immediately

When `cancel_immediately: true`:
- Access is revoked right away
- Subscription ends immediately
- With `prorate: true` (default), customer receives a credit for unused time
- With `prorate: false`, customer receives no refund

## Best Practices

1. **Default to period-end cancellation**: This provides a better customer experience and reduces friction.

2. **Always prorate immediate cancellations**: Unless there's a specific reason (like policy violation), issue prorated refunds for fairness.

3. **Confirm before canceling**: Show a confirmation dialog explaining when access will end.

4. **Offer alternatives**: Before canceling, offer to downgrade or pause instead.

5. **Send confirmation**: Email customers confirming the cancellation and when access ends.

6. **Log cancellation reasons**: Track why customers cancel to improve your product.

7. **Handle gracefully**: Check if the customer actually has the product before attempting to cancel.

## Error Handling

<ResponseField name="error" type="object">
  Error object returned when the request fails

  <Expandable title="error properties">
    <ResponseField name="error.code" type="string">
      Error code (e.g., "product_not_found", "customer_not_found", "not_attached")
    </ResponseField>
    <ResponseField name="error.message" type="string">
      Human-readable error message
    </ResponseField>
  </Expandable>
</ResponseField>

Common error codes:
- `product_not_found`: Product ID doesn't exist
- `customer_not_found`: Customer doesn't exist
- `not_attached`: Customer doesn't have this product attached
- `already_canceled`: Product is already canceled
- `validation_error`: Invalid request parameters

Example error handling:

```javascript
try {
  const result = await autumn.cancel({
    customer_id: 'user_123',
    product_id: 'pro_plan',
  });
  
  console.log('Cancellation successful');
} catch (error) {
  if (error.code === 'not_attached') {
    console.log('Customer does not have this product');
  } else if (error.code === 'already_canceled') {
    console.log('Subscription is already canceled');
  } else {
    console.error('Cancellation failed:', error.message);
  }
}
```

## Related Endpoints

- [Attach](/api/attach) - Attach new products or reactivate canceled ones
- [Check](/api/check) - Verify customer's current access
- [Customers Get](/api/customers/get) - View customer's active products
