---
title: 'Redeem Referral Code'
description: 'Redeem a referral code for a customer'
api: 'POST /referrals/redeem'
---

Redeem a referral code on behalf of a customer. This applies referral rewards to both the new customer (referee) and the referring customer (referrer) according to your referral program configuration.

## Request Body

<ParamField body="code" type="string" required>
  The referral code to redeem.
  
  ```
  "REF123ABC"
  ```
</ParamField>

<ParamField body="customer_id" type="string" required>
  The unique identifier of the customer redeeming the code (the referee).
  
  ```
  "cus_456"
  ```
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Whether the redemption was successful.
  
  ```
  true
  ```
</ResponseField>

<ResponseField name="code" type="string">
  The redeemed referral code.
  
  ```
  "REF123ABC"
  ```
</ResponseField>

<ResponseField name="referrer_id" type="string">
  The customer ID of the referrer (the person who owns the code).
  
  ```
  "cus_123"
  ```
</ResponseField>

<ResponseField name="referee_id" type="string">
  The customer ID of the referee (the person redeeming the code).
  
  ```
  "cus_456"
  ```
</ResponseField>

<ResponseField name="program_id" type="string">
  The ID of the referral program.
  
  ```
  "prog_123"
  ```
</ResponseField>

<ResponseField name="rewards" type="object">
  Details about the rewards granted.
  
  <Expandable title="Rewards Object">
    <ResponseField name="rewards.referrer" type="object">
      Rewards granted to the referrer
    </ResponseField>
    
    <ResponseField name="rewards.referee" type="object">
      Rewards granted to the referee
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="redeemed_at" type="number">
  Unix timestamp (in milliseconds) when the code was redeemed.
  
  ```
  1709337600000
  ```
</ResponseField>

## Examples

<CodeGroup>
```bash cURL
curl -X POST https://api.useautumn.com/referrals/redeem \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "code": "REF123ABC",
    "customer_id": "cus_456"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.useautumn.com/referrals/redeem', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    code: 'REF123ABC',
    customer_id: 'cus_456'
  })
});

const data = await response.json();
if (data.success) {
  console.log('Referral applied!');
  console.log(`Referrer: ${data.referrer_id}`);
}
```

```python Python
import requests

response = requests.post(
  'https://api.useautumn.com/referrals/redeem',
  headers={
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  json={
    'code': 'REF123ABC',
    'customer_id': 'cus_456'
  }
)

data = response.json()
if data['success']:
    print(f"Referral applied! Referrer: {data['referrer_id']}")
```

```typescript TypeScript
interface RedeemReferralRequest {
  code: string;
  customer_id: string;
}

interface RedemptionResponse {
  success: boolean;
  code: string;
  referrer_id: string;
  referee_id: string;
  program_id: string;
  rewards: {
    referrer: any;
    referee: any;
  };
  redeemed_at: number;
}

const redeemReferral = async (
  params: RedeemReferralRequest
): Promise<RedemptionResponse> => {
  const response = await fetch('https://api.useautumn.com/referrals/redeem', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(params)
  });
  
  return await response.json();
};

const result = await redeemReferral({
  code: 'REF123ABC',
  customer_id: 'cus_456'
});

if (result.success) {
  console.log('Rewards applied:', result.rewards);
}
```
</CodeGroup>

## Response Example

```json
{
  "success": true,
  "code": "REF123ABC",
  "referrer_id": "cus_123",
  "referee_id": "cus_456",
  "program_id": "prog_123",
  "rewards": {
    "referrer": {
      "type": "credit",
      "amount": 1000,
      "description": "Referral bonus: 1 month free"
    },
    "referee": {
      "type": "discount",
      "percent": 20,
      "description": "20% off first month"
    }
  },
  "redeemed_at": 1709337600000
}
```

## Use Cases

### Apply Code During Sign-Up

```javascript
// Redeem referral code when a new user signs up
async function signUpWithReferral(userData, referralCode) {
  // Create customer first
  const customer = await fetch('https://api.useautumn.com/customers', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      id: userData.id,
      email: userData.email,
      name: userData.name
    })
  }).then(r => r.json());
  
  // Redeem referral code
  if (referralCode) {
    const redemption = await fetch('https://api.useautumn.com/referrals/redeem', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        code: referralCode,
        customer_id: customer.id
      })
    }).then(r => r.json());
    
    if (redemption.success) {
      return {
        customer,
        referralApplied: true,
        rewards: redemption.rewards.referee
      };
    }
  }
  
  return { customer, referralApplied: false };
}
```

### Validate Code Before Redemption

```javascript
// Check if code is valid before showing sign-up form
async function validateReferralCode(code) {
  try {
    // Attempt redemption with a test customer to validate
    // In production, you'd want a separate validation endpoint
    const response = await fetch('https://api.useautumn.com/referrals/redeem', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        code: code,
        customer_id: 'test_validation'
      })
    });
    
    if (response.status === 404) {
      return { valid: false, message: 'Invalid referral code' };
    }
    
    return { valid: true };
  } catch (error) {
    return { valid: false, message: 'Unable to validate code' };
  }
}
```

### Post-Sign-Up Redemption

```javascript
// Allow users to apply referral code after signing up
async function applyReferralCodeLater(customerId, code) {
  try {
    const redemption = await fetch('https://api.useautumn.com/referrals/redeem', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        code: code,
        customer_id: customerId
      })
    }).then(r => r.json());
    
    if (redemption.success) {
      // Notify user of rewards
      return {
        success: true,
        message: `Referral code applied! ${redemption.rewards.referee.description}`,
        rewards: redemption.rewards.referee
      };
    }
  } catch (error) {
    if (error.code === 'already_redeemed') {
      return {
        success: false,
        message: 'You have already used a referral code'
      };
    }
    throw error;
  }
}
```

### Track Redemptions in Analytics

```javascript
// Track referral redemptions
async function redeemAndTrack(code, customerId) {
  const redemption = await fetch('https://api.useautumn.com/referrals/redeem', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      code: code,
      customer_id: customerId
    })
  }).then(r => r.json());
  
  if (redemption.success) {
    // Track in analytics
    analytics.track('Referral Redeemed', {
      customer_id: customerId,
      referrer_id: redemption.referrer_id,
      code: code,
      program: redemption.program_id,
      rewards: redemption.rewards
    });
    
    // Notify referrer
    await notifyReferrer(redemption.referrer_id, {
      newCustomer: customerId,
      rewards: redemption.rewards.referrer
    });
  }
  
  return redemption;
}
```

## Error Responses

<ResponseField name="404 Not Found">
  The referral code does not exist or has expired.
  
  ```json
  {
    "error": {
      "code": "not_found",
      "message": "Referral code not found"
    }
  }
  ```
</ResponseField>

<ResponseField name="400 Bad Request">
  The code has already been redeemed by this customer or the customer is trying to redeem their own code.
  
  ```json
  {
    "error": {
      "code": "already_redeemed",
      "message": "This referral code has already been redeemed by this customer"
    }
  }
  ```
</ResponseField>

<ResponseField name="403 Forbidden">
  The referral code is inactive or the program has ended.
  
  ```json
  {
    "error": {
      "code": "code_inactive",
      "message": "This referral code is no longer active"
    }
  }
  ```
</ResponseField>

## Important Notes

<Warning>
  **One Redemption Per Customer**: A customer can typically only redeem one referral code. Once redeemed, they cannot use another code unless your program allows it.
</Warning>

<Warning>
  **Self-Redemption**: Customers cannot redeem their own referral codes. The system will reject attempts to do so.
</Warning>

<Info>
  **Timing**: Redemptions are processed immediately and rewards are applied according to your program configuration (instant credits, discounts on next purchase, etc.).
</Info>

<Tip>
  **Reward Types**: Rewards can include credits, discounts, free trials, bonus features, or custom rewards defined in your referral program.
</Tip>

## Related Endpoints

<CardGroup cols={2}>
  <Card title="Create Referral Code" icon="link" href="/api/referrals/create-code">
    Generate a new referral code
  </Card>
  <Card title="Create Customer" icon="user-plus" href="/api/customers/create">
    Create a new customer
  </Card>
  <Card title="Get Customer" icon="user" href="/api/customers/get">
    Retrieve customer details
  </Card>
</CardGroup>

## See Also

- [Referral Programs Guide](/guides/referral-programs)
- [Customer API](/api/customers)
