---
title: 'Update Balance'
description: 'Update or set the balance or usage for a specific feature for a customer'
api: 'POST /balances/update'
---

Update or set the balance or usage for a specific feature for a customer. Either current_balance or usage must be provided, but not both. This endpoint is useful for manually adjusting feature balances or correcting usage data.

## Request Body

<ParamField body="customer_id" type="string" required>
  The ID of the customer.
  
  ```
  "cus_123"
  ```
</ParamField>

<ParamField body="entity_id" type="string">
  The ID of the entity to update balance for (if using entity balances).
  
  ```
  "entity_456"
  ```
</ParamField>

<ParamField body="feature_id" type="string" required>
  The ID of the feature to update balance for.
  
  ```
  "api_calls"
  ```
</ParamField>

<ParamField body="current_balance" type="number">
  The new balance value to set. Cannot be used together with `usage`.
  
  ```
  5000
  ```
</ParamField>

<ParamField body="interval" type="enum">
  The interval to update balance for.
  
  Options: `day`, `week`, `month`, `year`, `one_time`
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Whether the balance update was successful.
  
  ```
  true
  ```
</ResponseField>

## Examples

<CodeGroup>
```bash cURL - Set Balance
curl -X POST https://api.useautumn.com/balances/update \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "cus_123",
    "feature_id": "api_calls",
    "current_balance": 5000
  }'
```

```bash cURL - Set Entity Balance
curl -X POST https://api.useautumn.com/balances/update \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "cus_123",
    "entity_id": "entity_456",
    "feature_id": "storage_gb",
    "current_balance": 100,
    "interval": "month"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.useautumn.com/balances/update', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    customer_id: 'cus_123',
    feature_id: 'api_calls',
    current_balance: 5000
  })
});

const data = await response.json();
console.log(data.success); // true
```

```python Python
import requests

response = requests.post(
  'https://api.useautumn.com/balances/update',
  headers={
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  json={
    'customer_id': 'cus_123',
    'feature_id': 'api_calls',
    'current_balance': 5000
  }
)

data = response.json()
print(data['success'])
```

```typescript TypeScript
interface UpdateBalanceRequest {
  customer_id: string;
  entity_id?: string;
  feature_id: string;
  current_balance?: number;
  interval?: 'day' | 'week' | 'month' | 'year' | 'one_time';
}

interface UpdateBalanceResponse {
  success: boolean;
}

const updateBalance = async (
  params: UpdateBalanceRequest
): Promise<UpdateBalanceResponse> => {
  const response = await fetch('https://api.useautumn.com/balances/update', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(params)
  });
  
  return await response.json();
};

const result = await updateBalance({
  customer_id: 'cus_123',
  feature_id: 'api_calls',
  current_balance: 5000
});
```
</CodeGroup>

## Response Example

```json
{
  "success": true
}
```

## Use Cases

### Grant Additional Credits

```javascript
// Give a customer bonus credits
await fetch('https://api.useautumn.com/balances/update', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    customer_id: 'cus_123',
    feature_id: 'api_calls',
    current_balance: 15000 // Grant 15,000 API calls
  })
});
```

### Reset Usage for a Feature

```javascript
// Reset monthly usage to 0 at the start of a new period
await fetch('https://api.useautumn.com/balances/update', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    customer_id: 'cus_123',
    feature_id: 'storage_gb',
    current_balance: 100,
    interval: 'month'
  })
});
```

### Update Entity-Specific Balance

```javascript
// Update balance for a specific entity (e.g., workspace)
await fetch('https://api.useautumn.com/balances/update', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    customer_id: 'cus_123',
    entity_id: 'workspace_789',
    feature_id: 'projects',
    current_balance: 50
  })
});
```

## Important Notes

<Warning>
  **Mutually Exclusive**: You cannot provide both `current_balance` and `usage` in the same request. Choose one based on your use case.
</Warning>

<Info>
  **Balance vs Usage**: Use `current_balance` to set the remaining balance. The system will calculate usage based on the difference from the granted amount.
</Info>

<Tip>
  **Interval Specificity**: When updating balances with reset intervals, specify the `interval` parameter to target the correct balance period.
</Tip>

## Related Endpoints

<CardGroup cols={2}>
  <Card title="Create Balance" icon="plus" href="/api/balances/create">
    Create a new balance for a feature
  </Card>
  <Card title="Track Usage" icon="chart-line" href="/api/track">
    Record usage for metered features
  </Card>
  <Card title="Check Access" icon="shield-check" href="/api/check">
    Verify feature access and balances
  </Card>
  <Card title="Get Customer" icon="user" href="/api/customers/get">
    Retrieve customer with balances
  </Card>
</CardGroup>
